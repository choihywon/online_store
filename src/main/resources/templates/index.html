<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Home</title>
</head>
<body>
<h1>Welcome to Bookstore</h1>


<div th:if="${#authorization.expression('isAnonymous()')}">
  <p><a href="/users/join">회원가입</a></p>
  <p><a href="/users/login">로그인</a></p>
</div>


<div th:if="${#authorization.expression('isAuthenticated()')}">
  <p><a href="/users/mypage">마이페이지</a></p>
  <form action="/logout" method="post">
    <button type="submit">로그아웃</button>
  </form>
</div>


<div th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'')')}">
  <h2>관리자 메뉴</h2>
  <p><a href="/admin/users">유저 관리</a></p>
  <p><a href="/admin/blacklist">블랙리스트 관리</a></p>
  <p><a href="/admin/inventory/search-page">책 검색 및 등록</a></p>
  <p><a href="/admin/inventory">등록된 책 목록 조회</a></p>
</div>

<h2>판매 중인 책 목록</h2>
<table border="1">
  <tr>
    <th>책 제목</th>
    <th>ISBN</th>
    <th>저자</th>
    <th>출판사</th>
    <th>가격</th>
    <th>썸네일</th>
  </tr>
  <tr th:each="book : ${books}">
    <td th:text="${book.title}"></td>
    <td th:text="${book.isbn}"></td>
    <td th:text="${#strings.arrayJoin(book.authors, ', ')}"></td>
    <td th:text="${book.publisher}"></td>
    <td th:text="${book.salePrice} + '원'"></td>
    <td><img th:src="${book.thumbnail}" width="100"></td>
  </tr>
</table>

</body>
</html>
